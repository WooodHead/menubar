{"componentChunkName":"component---src-components-post-tsx","path":"/firebase-functions-sending-emails","result":{"pageContext":{"post":{"id":"cjeqgfv88nnrt01997wxd4rnl","title":"Sending emails with Firebase Cloud Functions","slug":"firebase-functions-sending-emails","published_at":"2019-09-02T02:40:25.863","created_at":"2018-03-14T02:16:45","encoded_html":"PHA+RmlyZWJhc2UgZnVuY3Rpb25zIGFyZSBhIGxvdCBvZiBmdW4uIFRoZXkgYWxsb3cgeW91IHRvIHVuY291cGxlIGJ1c2luZXNzIGxvZ2ljIGZyb20geW91ciBhcHAuPC9wPgo8cD5JbnN0ZWFkIG9mIHJ1bm5pbmcgY29tcHV0YXRpb25hbGx5IGV4cGVuc2l2ZSB0YXNrcyBvbiB5b3VyIHNlcnZlciB5b3UgY2FuIGxldmVyYWdlIGZpcmViYXNlIGZ1bmN0aW9ucy48L3A+CjxwPkhlcmUncyBhIHF1aWNrIGFuZCBkaXJ0eSBndWlkZSB0byB1c2luZyBGaXJlYmFzZSBmdW5jdGlvbnMgdG8gc2VuZCB3ZWxjb21lIGVtYWlscy48L3A+CjxwcmU+PGNvZGUgY2xhc3M9Imxhbmd1YWdlLWpzIj48c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dmFyPC9zcGFuPiBmdW5jdGlvbnMgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnJlcXVpcmU8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidmaXJlYmFzZS1mdW5jdGlvbnMnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnZhcjwvc3Bhbj4gbWFpbGd1biA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVxdWlyZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J21haWxndW4tanMnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPmFwaUtleTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gZG9tYWluPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KZXhwb3J0czxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5zZW5kV2VsY29tZUVtYWlsIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gZnVuY3Rpb25zPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmRhdGFiYXNlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVmPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4ndXNlcnMve3VpZH0nPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5vbldyaXRlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5ldmVudDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49Pjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4vLyBvbmx5IHRyaWdnZXIgZm9yIG5ldyB1c2VycyBbZXZlbnQuZGF0YS5wcmV2aW91cy5leGlzdHMoKV08L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPi8vIGRvIG5vdCB0cmlnZ2VyIG9uIGRlbGV0ZSBbIWV2ZW50LmRhdGEuZXhpc3RzKCldPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5pZjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+ITwvc3Bhbj5ldmVudDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5kYXRhPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+ZXhpc3RzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+fHw8L3NwYW4+IGV2ZW50PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmRhdGE8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+cHJldmlvdXM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5leGlzdHM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5yZXR1cm48L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj52YXI8L3NwYW4+IHVzZXIgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiBldmVudDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5kYXRhPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+dmFsPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnZhcjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPmVtYWlsPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IHVzZXIKICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dmFyPC9zcGFuPiBkYXRhIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmZyb208L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nYXBwQGFwcC5jb20nPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4KICAgIHN1YmplY3Q8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidXZWxjb21lISc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPgogICAgaHRtbDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHRlbXBsYXRlLXN0cmluZyI+PHNwYW4gY2xhc3M9InRva2VuIHRlbXBsYXRlLXB1bmN0dWF0aW9uIHN0cmluZyI+YDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4mbHQ7cD5XZWxjb21lISA8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGludGVycG9sYXRpb24iPjxzcGFuIGNsYXNzPSJ0b2tlbiBpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIHB1bmN0dWF0aW9uIj4kezwvc3Bhbj51c2VyPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPm5hbWU8c3BhbiBjbGFzcz0idG9rZW4gaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+Jmx0Oy9wPjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gdGVtcGxhdGUtcHVuY3R1YXRpb24gc3RyaW5nIj5gPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4naDpSZXBseS1Ubyc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nYXBwQGFwcC5jb20nPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4KICAgIHRvPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiBlbWFpbAogIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICBtYWlsZ3VuPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+bWVzc2FnZXM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zZW5kPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5kYXRhPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+ZnVuY3Rpb248L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5lcnJvcjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gYm9keTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIGNvbnNvbGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5sb2c8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPmJvZHk8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48L2NvZGU+PC9wcmU+CjxwPkluIHRoZSBhYm92ZSBjb2RlIHNuaXBwZXQsIHdlIHVzZSB0aGUgdHJhbnNhY3Rpb25hbCBzZXJ2aWNlIE1haWxndW4gdG8gc2VuZCBhIHdlbGNvbWUgZW1haWwuIFdlJ3JlIGFsc28gdXNpbmcgdGhlIG5vZGUgcGFja2FnZSBtYWlsZ3VuLWpzLCBhIHdyYXBwZXIgYXJvdW5kIE1haWxndW4ncyBBUEkuPC9wPgo8cD5UaGluZ3MgdG8gbm90ZTo8L3A+Cjx1bD4KICA8bGk+VGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgZXhlY3V0ZSBvbmNlIHBlciB1c2VyIC0gd2hpY2ggd2UgY2FuIGNoYW5nZSBpZiBuZWVkZWQuPC9saT4KICA8bGk+V2UgbWlnaHQgd2FudCB0byBhZGQgYSBjYWxsYmFjayB0byBvdXIgZmlyZWJhc2Ugc2VydmVyIGlmIHRoZSBlbWFpbCBpcyBzZW50IHN1Y2Nlc3NmdWxseS48L2xpPgogIDxsaT48Y29kZT5hcGlLZXk8L2NvZGU+IC0gdGhpcyBpcyB5b3VyIE1haWxndW4gQVBJIGtleS48L2xpPgogIDxsaT48Y29kZT5kb21haW48L2NvZGU+IC0gdGhpcyBpcyB5b3VyIGRvbWFpbiBuYW1lIHJlZ2lzdGVyZWQgd2l0aCBNYWlsZ3VuLjwvbGk+CjwvdWw+CjxoMj5TdWJzY3JpYmluZyBuZXcgdXNlcnMgdG8gcmVjZWl2ZSBlbWFpbHM8L2gyPgo8cD5MZXQncyBzYXkgdGhhdCBpbnN0ZWFkIG9mIHNlbmRpbmcgb25lIHdlbGNvbWUgZW1haWwsIHdlIHdhbnQgdG8gaW5pdGlhdGUgYSBkcmlwIGNhbXBhaWduLjwvcD4KPHA+SW4gdGhhdCBjYXNlLCB3ZSBjb3VsZCB3cml0ZSB0byBvdXIgZmlyZWJhc2UgZGF0YWJhc2UgYW5kIHVwZGF0ZSBhIGZpZWxkIChsaWtlIHsgc3Vic2NyaWJlZDogdHJ1ZSB9KS48L3A+CjxwPk9uZSB0aGluZyB0byBiZSBtaW5kZnVsIG9mIGlzIGNsb3VkIGZ1bmN0aW9ucyB0aGF0IHdyaXRlIHRvIHRoZSBzYW1lIGRhdGFiYXNlIHBhdGggdGhhdCB0cmlnZ2VycyB0aGVtLiBJZiB5b3UncmUgbm90IGNhcmVmdWwgeW91IG1pZ2h0IGluZHVjZSBhbiBpbmZpbml0ZSBsb29wLjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj52YXI8L3NwYW4+IGZ1bmN0aW9ucyA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVxdWlyZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J2ZpcmViYXNlLWZ1bmN0aW9ucyc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ozwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnZhcjwvc3Bhbj4gYWRtaW4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnJlcXVpcmU8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidmaXJlYmFzZS1hZG1pbic8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgphZG1pbjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmluaXRpYWxpemVBcHA8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPmZ1bmN0aW9uczxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmNvbmZpZzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5maXJlYmFzZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjs8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj52YXI8L3NwYW4+IG1haWxndW4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnJlcXVpcmU8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidtYWlsZ3VuLWpzJzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj5hcGlLZXk8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+IGRvbWFpbjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CmV4cG9ydHM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+c3Vic2NyaWJlVXNlciA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IGZ1bmN0aW9uczxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5kYXRhYmFzZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnJlZjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J3VzZXJzL3t1aWR9Jzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+b25Xcml0ZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHBhcmFtZXRlciI+ZXZlbnQ8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dmFyPC9zcGFuPiB1c2VyIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gZXZlbnQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+ZGF0YTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnZhbDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj52YXI8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj51aWQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gZXZlbnQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+cGFyYW1zCiAgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPi8vIEV4aXQgaWYgdGhlIHVzZXIgd2FzIGRlbGV0ZWQgb3IgdGhlIHVzZXIgaXMgY3VycmVudGx5IHN1YnNjcmliZWQ8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmlmPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4hPC9zcGFuPmV2ZW50PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmRhdGE8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5leGlzdHM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj58fDwvc3Bhbj4gdXNlcjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5zdWJzY3JpYmVkIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnJldHVybjwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmxldDwvc3Bhbj4gbWVtYmVycyA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIGFkZHJlc3M8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IHVzZXI8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+ZW1haWwKICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnZhcjwvc3Bhbj4gbGlzdElkIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J3lvdXIgbWFpbGd1biBsaXN0IGlkJzwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gQWRkIHRoZSB1c2VyIHRvIG91ciBtYWlsZ3VuIGxpc3Q8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnJldHVybjwvc3Bhbj4gbWFpbGd1bjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmxpc3RzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5saXN0SWQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+bWVtYmVyczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmFkZDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPm1lbWJlcnM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+IHN1YnNjcmliZWQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBib29sZWFuIj50cnVlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5mdW5jdGlvbjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPmVycjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gYm9keTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5pZjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4hPC9zcGFuPmVycjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+cmV0dXJuPC9zcGFuPiBhZG1pbjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmRhdGFiYXNlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVmPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4ndXNlcnMvJzwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4rPC9zcGFuPiB1aWQgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4rPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nL3N1YnNjcmliZWQnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zZXQ8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBib29sZWFuIj50cnVlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPiAgCjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PC9jb2RlPjwvcHJlPgo8cD5IZXJlJ3Mgd2hhdCB3ZSBkaWQgaW4gdGhlIHNuaXBwZXQgYWJvdmU6PC9wPgo8dWw+CiAgPGxpPk1ha2Ugc3VyZSB0aGF0IHRoZSBmdW5jdGlvbnMgZG9lc24ndCB0cmlnZ2VyIG9uIGRlbGV0ZSAoIWV2ZW50LmRhdGEuZXhpc3RzKCkpPC9saT4KICA8bGk+TWFrZSBzdXJlIHRoYXQgdGhlIGZ1bmN0aW9uIGRvZXNuJ3QgdHJpZ2dlciBpZiB0aGUgdXNlciBpcyBhbHJlYWR5IHN1YnNjcmliZWQ8L2xpPgogIDxsaT5TdWJzY3JpYmUgdGhlIHVzZXIgdG8gYSBsaXN0IHVzaW5nIHRoZSBtYWlsZ3VuIEFQSTwvbGk+CiAgPGxpPnVzZSBmaXJlYmFzZSBhZG1pbiB0byB1cGRhdGUgdGhlIHZhbHVlIGF0IDxjb2RlPnVzZXJzL3t1aWR9L3N1YnNjcmliZWQ8L2NvZGU+IHRvIHRydWUuPC9saT4KPC91bD4KPGgyPlNlbmRpbmcgRW1haWxzIFdpdGggTWFpbGNoaW1wPC9oMj4KPHA+SW5zdGVhZCBvZiB1c2luZyBhIHRyYW5zYWN0aW9uYWwgZW1haWwgc2VydmljZSBsaWtlIE1haWxndW4gb3IgU2VuZGdyaWQsIHlvdSBjb3VsZCBhbHNvIHVzZSBNYWlsY2hpbXAgKHdoaWNoIGlzIGp1c3QgYSB1c2VyLWZyaWVuZGx5IHdyYXBwZXIgYXJvdW5kIE1haWxndW4pLjwvcD4KPHA+SGVyZSdzIGhvdyB5b3UnZCB1c2UgTWFpbGNoaW1wJ3MgQVBJLjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj52YXI8L3NwYW4+IGZldGNoIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5yZXF1aXJlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4naXNvbW9ycGhpYy1mZXRjaCc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dmFyPC9zcGFuPiBidG9hIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5yZXF1aXJlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nYnRvYSc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ozwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPi8vIFBPU1QgL2xpc3RzL3tsaXN0X2lkfS9tZW1iZXJzPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gQWRkIGEgbmV3IGxpc3QgbWVtYmVyPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+ZnVuY3Rpb248L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+Y3JlYXRlRmV0Y2g8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4gIAogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj52YXI8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBjb25zdGFudCI+TUFJTENISU1QX0FQSV9LRVk8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+Jyc8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPi8vIE5PVEU6IG1haWxjaGltcCdzIEFQSSB1cmkgZGlmZmVycyBkZXBlbmRpbmcgb24geW91ciBsb2NhdGlvbi4gdXM2IGlzIHRoZSBlYXN0IGNvYXN0LiA8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnZhcjwvc3Bhbj4gdXJsIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J2h0dHBzOi8vdXM2LmFwaS5tYWlsY2hpbXAuY29tLzMuMC9saXN0cy8nPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPis8L3NwYW4+IGxpc3RJZCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPis8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPicvbWVtYmVycyc8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnZhcjwvc3Bhbj4gbWV0aG9kIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J1BPU1QnPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj52YXI8L3NwYW4+IGhlYWRlcnMgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nYXV0aG9yaXphdGlvbic8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4iQmFzaWMgIjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4rPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmJ0b2E8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidyYW5kb21zdHJpbmc6Jzwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4rPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gY29uc3RhbnQiPk1BSUxDSElNUF9BUElfS0VZPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nQWNjZXB0Jzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidhcHBsaWNhdGlvbi9qc29uJzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nQ29udGVudC1UeXBlJzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidhcHBsaWNhdGlvbi9qc29uJzwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnZhcjwvc3Bhbj4gYm9keSA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBjb25zdGFudCI+SlNPTjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zdHJpbmdpZnk8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj5lbWFpbF9hZGRyZXNzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiB1c2VyPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmVtYWlsPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPiBzdGF0dXM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidzdWJzY3JpYmVkJzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5yZXR1cm48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+ZmV0Y2g8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPnVybDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgbWV0aG9kPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPgogICAgaGVhZGVyczxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4KICAgIGJvZHkKICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnRoZW48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPnJlc3A8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IHJlc3A8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5qc29uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnRoZW48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPnJlc3A8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIGNvbnNvbGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5sb2c8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPnJlc3A8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjwvY29kZT48L3ByZT4KPGgyPk5vdGVzPC9oMj4KPHVsPgogIDxsaT5Zb3UnbGwgbmVlZCB0byA8Y29kZT5ucG0gaSBidG9hIC0tc2F2ZTwvY29kZT4gZm9yIHRoaXMgdG8gd29yay4gPGEgaHJlZj0iaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYnRvYSI+YnRvYTwvYT4gYmluYXJ5IGVuY29kZXMgZGF0YSB0byBiYXNlIDY0LWVuY29kZWQgYXNjaWkuPC9saT4KICA8bGk+TWFpbGNoaW1wJ3MgQVBJIGlzIDxhIGhyZWY9Imh0dHBzOi8vZGV2ZWxvcGVyLm1haWxjaGltcC5jb20vZG9jdW1lbnRhdGlvbi9tYWlsY2hpbXAvcmVmZXJlbmNlL2xpc3RzL21lbWJlcnMvIj5yZWFsbHkgd2VsbCBkb2N1bWVudGVkPC9hPi48L2xpPgo8L3VsPgo8aDI+RGVwbG95aW5nIEZpcmViYXNlIEZ1bmN0aW9uczwvaDI+CjxwcmU+PGNvZGUgY2xhc3M9Imxhbmd1YWdlLWJhc2giPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+bnBtPC9zcGFuPiBpIGZpcmViYXNlLXRvb2xzIC1nIDxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4jIGluc3RhbGwgZmlyZWJhc2UgY2xpPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj5jZDwvc3Bhbj4gbXktcHJvamVjdCAKZmlyZWJhc2UgbG9naW4KZmlyZWJhc2UgaW5pdCBmdW5jdGlvbnM8L2NvZGU+PC9wcmU+CjxwPk5vdyBhZGQgeW91ciBjb2RlIHRvIC4vZnVuY3Rpb25zL2luZGV4LmpzOjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPmV4cG9ydHM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+c2VuZEVtYWlsIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4uLi48L3NwYW4+CjwvY29kZT48L3ByZT4KPHA+QW5kIG5wbSBpbnN0YWxsIGFueSByZXF1aXJlZCBwYWNrYWdlcy4gKGZpcmViYXNlLWZ1bmN0aW9ucyBhbmQgZmlyZWJhc2UtYWRtaW4gc2hvdWxkIGJlIHByZWluc3RhbGxlZCBhZnRlciBmaXJlYmFzZSBpbml0IGZ1bmN0aW9ucykuPC9wPgo8cD5GaW5hbGx5IGRlcGxveSB3aXRoOjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtYmFzaCI+ZmlyZWJhc2UgZGVwbG95IC0tb25seSBmdW5jdGlvbnM8L2NvZGU+PC9wcmU+CjxoMj5Hb3RjaGFzPC9oMj4KPHVsPgogIDxsaT5Zb3UnbGwgbmVlZCB0byBlbmFibGUgYmlsbGluZyBhdCBodHRwczovL2dvb2dsZS5maXJlYmFzZS5jb20gZm9yIHlvdXIgcHJvamVjdCB0byBtYWtlIGV4dGVybmFsIEFQSSByZXF1ZXN0cy4gSWYgYmlsbGluZyBpcyBub3QgZW5hYmxlZCB5b3UnbGwgZ2V0IGFuIG9wYXF1ZSBlcnJvci48L2xpPgogIDxsaT5SZW1lbWJlciB0aGF0IGlmIHlvdSdyZSB1c2luZyBFUzYgc3ludGF4IHlvdSdsbCBuZWVkIHRvIHRyYW5zcGlsZSBpdCB3aXRoIGJhYmVsLjwvbGk+CjwvdWw+CjxoMj5SZXNvdXJjZXM8L2gyPgo8dWw+CiAgPGxpPjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9mdW5jdGlvbnMtc2FtcGxlcy9ibG9iL21hc3Rlci9xdWlja3N0YXJ0cy9lbWFpbC11c2Vycy9mdW5jdGlvbnMvaW5kZXguanMiPlNlbmQgZW1haWxzIHdpdGggRmlyZWJhc2UgZnVuY3Rpb25zPC9hPiAtIEZpcmViYXNlJ3MgZXhhbXBsZS48L2xpPgo8L3VsPg==","excerpt":"Firebase functions are a lot of fun, no doubt. They allow you to uncouple business logic from your ","image":{"id":"halcwt29roxsuoaj5pukdpm27","url":"static/cjeqgfv88nnrt01997wxd4rnl/firebase.jpg"},"posts_tags":[],"date":"09/02/2019","html":"<p>Firebase functions are a lot of fun. They allow you to uncouple business logic from your app.</p>\n<p>Instead of running computationally expensive tasks on your server you can leverage firebase functions.</p>\n<p>Here's a quick and dirty guide to using Firebase functions to send welcome emails.</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">var</span> functions <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'firebase-functions'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> mailgun <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mailgun-js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>apiKey<span class=\"token punctuation\">,</span> domain<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nexports<span class=\"token punctuation\">.</span>sendWelcomeEmail <span class=\"token operator\">=</span> functions<span class=\"token punctuation\">.</span>database<span class=\"token punctuation\">.</span><span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'users/{uid}'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onWrite</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// only trigger for new users [event.data.previous.exists()]</span>\n  <span class=\"token comment\">// do not trigger on delete [!event.data.exists()]</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>previous<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>email<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> user\n  <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">from</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'app@app.com'</span><span class=\"token punctuation\">,</span>\n    subject<span class=\"token punctuation\">:</span> <span class=\"token string\">'Welcome!'</span><span class=\"token punctuation\">,</span>\n    html<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;p>Welcome! </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>user<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/p></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'h:Reply-To'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'app@app.com'</span><span class=\"token punctuation\">,</span>\n    to<span class=\"token punctuation\">:</span> email\n  <span class=\"token punctuation\">}</span>\n  mailgun<span class=\"token punctuation\">.</span><span class=\"token function\">messages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> body</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>In the above code snippet, we use the transactional service Mailgun to send a welcome email. We're also using the node package mailgun-js, a wrapper around Mailgun's API.</p>\n<p>Things to note:</p>\n<ul>\n  <li>This function will only execute once per user - which we can change if needed.</li>\n  <li>We might want to add a callback to our firebase server if the email is sent successfully.</li>\n  <li><code>apiKey</code> - this is your Mailgun API key.</li>\n  <li><code>domain</code> - this is your domain name registered with Mailgun.</li>\n</ul>\n<h2>Subscribing new users to receive emails</h2>\n<p>Let's say that instead of sending one welcome email, we want to initiate a drip campaign.</p>\n<p>In that case, we could write to our firebase database and update a field (like { subscribed: true }).</p>\n<p>One thing to be mindful of is cloud functions that write to the same database path that triggers them. If you're not careful you might induce an infinite loop.</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">var</span> functions <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'firebase-functions'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> admin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'firebase-admin'</span><span class=\"token punctuation\">)</span>\nadmin<span class=\"token punctuation\">.</span><span class=\"token function\">initializeApp</span><span class=\"token punctuation\">(</span>functions<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>firebase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> mailgun <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mailgun-js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>apiKey<span class=\"token punctuation\">,</span> domain<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nexports<span class=\"token punctuation\">.</span>subscribeUser <span class=\"token operator\">=</span> functions<span class=\"token punctuation\">.</span>database<span class=\"token punctuation\">.</span><span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'users/{uid}'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onWrite</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>uid<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>params\n  <span class=\"token comment\">// Exit if the user was deleted or the user is currently subscribed</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> user<span class=\"token punctuation\">.</span>subscribed <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">let</span> members <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    address<span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>email\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> listId <span class=\"token operator\">=</span> <span class=\"token string\">'your mailgun list id'</span>\n  <span class=\"token comment\">// Add the user to our mailgun list</span>\n  <span class=\"token keyword\">return</span> mailgun<span class=\"token punctuation\">.</span><span class=\"token function\">lists</span><span class=\"token punctuation\">(</span>listId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">members</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>members<span class=\"token punctuation\">,</span> subscribed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> body</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> admin<span class=\"token punctuation\">.</span><span class=\"token function\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token string\">'users/'</span> <span class=\"token operator\">+</span> uid <span class=\"token operator\">+</span> <span class=\"token string\">'/subscribed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>  \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Here's what we did in the snippet above:</p>\n<ul>\n  <li>Make sure that the functions doesn't trigger on delete (!event.data.exists())</li>\n  <li>Make sure that the function doesn't trigger if the user is already subscribed</li>\n  <li>Subscribe the user to a list using the mailgun API</li>\n  <li>use firebase admin to update the value at <code>users/{uid}/subscribed</code> to true.</li>\n</ul>\n<h2>Sending Emails With Mailchimp</h2>\n<p>Instead of using a transactional email service like Mailgun or Sendgrid, you could also use Mailchimp (which is just a user-friendly wrapper around Mailgun).</p>\n<p>Here's how you'd use Mailchimp's API.</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">var</span> fetch <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'isomorphic-fetch'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> btoa <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btoa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// POST /lists/{list_id}/members</span>\n<span class=\"token comment\">// Add a new list member</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">createFetch</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n  <span class=\"token keyword\">var</span> <span class=\"token constant\">MAILCHIMP_API_KEY</span> <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n  <span class=\"token comment\">// NOTE: mailchimp's API uri differs depending on your location. us6 is the east coast. </span>\n  <span class=\"token keyword\">var</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://us6.api.mailchimp.com/3.0/lists/'</span> <span class=\"token operator\">+</span> listId <span class=\"token operator\">+</span> <span class=\"token string\">'/members'</span>\n  <span class=\"token keyword\">var</span> method <span class=\"token operator\">=</span> <span class=\"token string\">'POST'</span>\n  <span class=\"token keyword\">var</span> headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'authorization'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Basic \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">btoa</span><span class=\"token punctuation\">(</span><span class=\"token string\">'randomstring:'</span> <span class=\"token operator\">+</span> <span class=\"token constant\">MAILCHIMP_API_KEY</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Accept'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'application/json'</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> body <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>email_address<span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">:</span> <span class=\"token string\">'subscribed'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    method<span class=\"token punctuation\">,</span>\n    headers<span class=\"token punctuation\">,</span>\n    body\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resp</span> <span class=\"token operator\">=></span> resp<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resp</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2>Notes</h2>\n<ul>\n  <li>You'll need to <code>npm i btoa --save</code> for this to work. <a href=\"https://www.npmjs.com/package/btoa\">btoa</a> binary encodes data to base 64-encoded ascii.</li>\n  <li>Mailchimp's API is <a href=\"https://developer.mailchimp.com/documentation/mailchimp/reference/lists/members/\">really well documented</a>.</li>\n</ul>\n<h2>Deploying Firebase Functions</h2>\n<pre><code class=\"language-bash\"><span class=\"token function\">npm</span> i firebase-tools -g <span class=\"token comment\"># install firebase cli</span>\n<span class=\"token builtin class-name\">cd</span> my-project \nfirebase login\nfirebase init functions</code></pre>\n<p>Now add your code to ./functions/index.js:</p>\n<pre><code class=\"language-js\">exports<span class=\"token punctuation\">.</span>sendEmail <span class=\"token operator\">=</span> <span class=\"token operator\">...</span>\n</code></pre>\n<p>And npm install any required packages. (firebase-functions and firebase-admin should be preinstalled after firebase init functions).</p>\n<p>Finally deploy with:</p>\n<pre><code class=\"language-bash\">firebase deploy --only functions</code></pre>\n<h2>Gotchas</h2>\n<ul>\n  <li>You'll need to enable billing at https://google.firebase.com for your project to make external API requests. If billing is not enabled you'll get an opaque error.</li>\n  <li>Remember that if you're using ES6 syntax you'll need to transpile it with babel.</li>\n</ul>\n<h2>Resources</h2>\n<ul>\n  <li><a href=\"https://github.com/firebase/functions-samples/blob/master/quickstarts/email-users/functions/index.js\">Send emails with Firebase functions</a> - Firebase's example.</li>\n</ul>"}}}}