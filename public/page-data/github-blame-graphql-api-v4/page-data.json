{"componentChunkName":"component---src-components-post-tsx","path":"/github-blame-graphql-api-v4","result":{"pageContext":{"post":{"id":"cjeqgfu6gnnrb0199nyrddra0","title":"Fetching Github Blame with the GraphQL API V4","slug":"github-blame-graphql-api-v4","published_at":null,"created_at":"2018-03-14T02:16:43","encoded_html":"PHA+R2l0aHViIEFQSSBWMyB3YXMgUkVTVDsgVjQgaXMgR3JhcGhRTC48L3A+CjxwPkJlbG93IHlvdSdsbCBmaW5kIGEgY29kZSBzbmlwcGV0IHRoYXQgZmV0Y2hlcyBHaXRodWIgYmxhbWUuPC9wPgo8cHJlPjxjb2RlIGNsYXNzPSJsYW5ndWFnZS1qcyI+PHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmxldDwvc3Bhbj4gb3duZXIgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nZmFjZWJvb2snPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+bGV0PC9zcGFuPiBuYW1lIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J3JlYWN0Jzwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmxldDwvc3Bhbj4gcGF0aCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidwYWNrYWdlcy9yZWFjdC9pbmRleC5qcyc8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IHRva2VuIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J01ZX1BFUlNPTkFMX0dJVEhVQl9UT0tFTic8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+ZmV0Y2g8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidodHRwczovL2FwaS5naXRodWIuY29tL2dyYXBocWwnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogIG1ldGhvZDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J1BPU1QnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4KICBoZWFkZXJzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nQXV0aG9yaXphdGlvbic8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gdGVtcGxhdGUtc3RyaW5nIj48c3BhbiBjbGFzcz0idG9rZW4gdGVtcGxhdGUtcHVuY3R1YXRpb24gc3RyaW5nIj5gPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPmJlYXJlciA8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGludGVycG9sYXRpb24iPjxzcGFuIGNsYXNzPSJ0b2tlbiBpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIHB1bmN0dWF0aW9uIj4kezwvc3Bhbj50b2tlbjxzcGFuIGNsYXNzPSJ0b2tlbiBpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIHB1bmN0dWF0aW9uIj59PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gdGVtcGxhdGUtcHVuY3R1YXRpb24gc3RyaW5nIj5gPC9zcGFuPjwvc3Bhbj4gICAgCiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4KICBib2R5PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gY29uc3RhbnQiPkpTT048L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+c3RyaW5naWZ5PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICBxdWVyeTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHRlbXBsYXRlLXN0cmluZyI+PHNwYW4gY2xhc3M9InRva2VuIHRlbXBsYXRlLXB1bmN0dWF0aW9uIHN0cmluZyI+YDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj5xdWVyeSB7CiAgICAgIHJlcG9zaXRvcnkob3duZXI6XCI8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGludGVycG9sYXRpb24iPjxzcGFuIGNsYXNzPSJ0b2tlbiBpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIHB1bmN0dWF0aW9uIj4kezwvc3Bhbj5vd25lcjxzcGFuIGNsYXNzPSJ0b2tlbiBpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIHB1bmN0dWF0aW9uIj59PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj5cIiwgbmFtZTpcIjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gaW50ZXJwb2xhdGlvbiI+PHNwYW4gY2xhc3M9InRva2VuIGludGVycG9sYXRpb24tcHVuY3R1YXRpb24gcHVuY3R1YXRpb24iPiR7PC9zcGFuPm5hbWU8c3BhbiBjbGFzcz0idG9rZW4gaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+XCIpIHsKICAgICAgICBkZWZhdWx0QnJhbmNoUmVmIHsKICAgICAgICAgIHRhcmdldCB7CiAgICAgICAgICAgIC4uLiBvbiBDb21taXQgewogICAgICAgICAgICAgIGJsYW1lKHBhdGg6IFwiPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBpbnRlcnBvbGF0aW9uIj48c3BhbiBjbGFzcz0idG9rZW4gaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbiBwdW5jdHVhdGlvbiI+JHs8L3NwYW4+cGF0aDxzcGFuIGNsYXNzPSJ0b2tlbiBpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIHB1bmN0dWF0aW9uIj59PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj5cIikgewogICAgICAgICAgICAgICAgcmFuZ2VzIHsKICAgICAgICAgICAgICAgICAgc3RhcnRpbmdMaW5lCiAgICAgICAgICAgICAgICAgIGVuZGluZ0xpbmUKICAgICAgICAgICAgICAgICAgYWdlCiAgICAgICAgICAgICAgICAgIGNvbW1pdCB7CiAgICAgICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICAgICAgICBjb21taXRVcmwKICAgICAgICAgICAgICAgICAgICBjb21taXRSZXNvdXJjZVBhdGgKICAgICAgICAgICAgICAgICAgICBjb21taXR0ZWREYXRlCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5CiAgICAgICAgICAgICAgICAgICAgb2lkCiAgICAgICAgICAgICAgICAgICAgdXJsCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHRlbXBsYXRlLXB1bmN0dWF0aW9uIHN0cmluZyI+YDwvc3Bhbj48L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj50aGVuPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5yZXNwPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj0+PC9zcGFuPiByZXNwPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+anNvbjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj50aGVuPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5yZXNwPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj0+PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgY29uc29sZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmxvZzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+cmVzcDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48L2NvZGU+PC9wcmU+","excerpt":"Github API V3 was REST; V4 is GraphQL.","image":null,"posts_tags":[],"date":"03/14/2018","html":"<p>Github API V3 was REST; V4 is GraphQL.</p>\n<p>Below you'll find a code snippet that fetches Github blame.</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">let</span> owner <span class=\"token operator\">=</span> <span class=\"token string\">'facebook'</span>\n<span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">let</span> path <span class=\"token operator\">=</span> <span class=\"token string\">'packages/react/index.js'</span>\n<span class=\"token keyword\">let</span> token <span class=\"token operator\">=</span> <span class=\"token string\">'MY_PERSONAL_GITHUB_TOKEN'</span>\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.github.com/graphql'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  method<span class=\"token punctuation\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n  headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'Authorization'</span><span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>token<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>    \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  body<span class=\"token punctuation\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    query<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">query {\n      repository(owner:\\\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>owner<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\\", name:\\\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\\") {\n        defaultBranchRef {\n          target {\n            ... on Commit {\n              blame(path: \\\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\\") {\n                ranges {\n                  startingLine\n                  endingLine\n                  age\n                  commit {\n                    id\n                    commitUrl\n                    commitResourcePath\n                    committedDate\n                    message\n                    messageBody\n                    oid\n                    url\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resp</span> <span class=\"token operator\">=></span> resp<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resp</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>"}}}}