{"componentChunkName":"component---src-components-post-tsx","path":"/draft-js-collaborative-editor","result":{"pageContext":{"post":{"id":"cjiy7xl9o17w701039gvl18a5","title":"Creating a Collaborative Editor with Draftjs for Fun","slug":"draft-js-collaborative-editor","published_at":"2020-06-28T04:00:00","created_at":"2018-06-28T07:19:34","encoded_html":"PHA+RHJhZnQuSnMgaXMgYSBwb3B1bGFyIHJpY2ggdGV4dCBlZGl0b3IgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoIFJlYWN0LiBVbnN1cnByaXNpbmdseSwgaXQgaXMgYWxzbyBjcmVhdGVkIGJ5IEZhY2Vib29rLjwvcD4KPHA+TGlrZSBvdGhlciByaWNoIHRleHQgZWRpdG9ycywgRHJhZnQuanMgaXMgYSB3cmFwcGVyIGFyb3VuZCBjb250ZW50ZWRpdGFibGUgYW5kIHRoZSBuYXRpdmUgU2VsZWN0aW9uIEFQSS4gSWYgeW91J3ZlIGV2ZXIgd29ya2VkIHdpdGggdGhlIG5hdGl2ZSBjb250ZW50ZWRpdGFibGUgYW5kIHdpbmRvdy5TZWxlY3Rpb24geW91IHdpbGwga25vdyB0aGF0IHRoZXkgYXJlIGEgaHVnZSBwYWluLiBOaWNrIFNhbnRvcyB3cm90ZSBhIHZlcnkgcGVyc3Vhc2l2ZSBhcnRpY2xlIGFib3V0IGhvdyBjb250ZW50ZWRpdGFibGUgaXMgbWF0aGVtYXRpY2FsbHkgZG9vbWVkIHRvIGZhaWwuPC9wPgo8aW1nIHNyYz0iaHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL2NvbnRlbnRraXQvc3RhdGljL2NqaXk3eGw5bzE3dzcwMTAzOWd2bDE4YTUvZHJhZnQtanMtMi5wbmciIC8+CjxwPkRyYWZ0SnMgZGVwZW5kcyBvbiBpbW11dGFibGUgc3RhdGUgbWFuYWdlbWVudC4gVGhpcyBoYXMgYSBudW1iZXIgb2YgYWR2YW50YWdlcy4gRm9yIGV4YW1wbGUsIHNpbmNlIGVkaXRvclN0YXRlIGlzIGltbXV0YWJsZSwgd2UgY2FuIGNoZWFwbHkgY2hlY2sgd2hldGhlciBhIGNvbXBvbmVudCBzaG91bGQgdXBkYXRlOjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5jbGFzczwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGNsYXNzLW5hbWUiPmV4dGVuZHM8L3NwYW4+IFJlYWN0PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPkNvbXBvbmVudCA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zaG91bGRDb21wb25lbnRVcGRhdGU8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPm5leHRQcm9wczxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gbmV4dFN0YXRlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnJldHVybjwvc3Bhbj4gbmV4dFByb3BzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmVkaXRvclN0YXRlIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+IT09PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dGhpczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+cHJvcHM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+ZWRpdG9yU3RhdGUKICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KPC9jb2RlPjwvcHJlPgo8cD5Ib3dldmVyIGltbXV0YWJpbGl0eSBkb2VzIG5vdCBjb21lIHdpdGhvdXQgcGVyZm9ybWFuY2UgcGVuYWx0aWVzLiBJbW11dGFiaWxpdHkgYWxzbyBjb250cmlidXRlcyB0byBjb2RlIGNvbXBsZXhpdHkgLSBzb21lIHRoaW5ncyBhcmUgbm90IGFzIGVhc3kgYXMgdGhleSBzaG91bGQgYmUgaW4gRHJhZnQuSnMuIEZvciBleGFtcGxlLCB0aGlzIGlzIHRoZSBjb2RlIG5lZWRlZCB0byBpbnNlcnQgYW4gZW1wdHkgYmxvY2sgaW50byB0aGUgZWRpdG9yLjwvcD4KPGgyPkNyZWF0aW5nIEEgQ29sbGFib3JhdGl2ZSBFZGl0b3I8L2gyPgo8cD5Zb3UndmUgcHJvYmFibHkgdXNlZCBHb29nbGUgZG9jcy4gSXQncyBjb2xsYWJvcmF0aXZlLiBJZiBJJ20gZWRpdGluZyB0aGUgc2FtZSBkb2N1bWVudCBhcyBteSBmcmllbmQsIEdvb2dsZSBEb2NzIGtlZXBzIHRyYWNrIG9mIGFuZCBkaXNwbGF5cyB0ZWFtIG1lbWJlcidzIGNoYW5nZXMgc2ltdWx0YW5lb3VzbHkuIE1vcmVvdmVyLCBlZGl0cyBhcmUgYW5ub3RhdGVkLiBDYW4gdGhlIHNhbWUgdGhpbmcgYmUgYWNjb21wbGlzaGVkIHVzaW5nIERyYWZ0LkpzPzwvcD4KPHA+SGVyZSdzIG15IGZpcnN0IGF0dGVtcHQgKGFuZCBoZXJlJ3MgdGhlIHNvdXJjZSkuIE5vdGU6IGEgY29va2llIGlzIHVzZWQsIHNvIGluIG9yZGVyIGZvciB0aGUgc2VydmVyIHRvIGRldGVjdCB0d28gZGlzdGluY3QgdXNlcnMgeW91J2xsIG5lZWQgdG8gb3BlbiBhIG5ldyB3aW5kb3cgaW4gaW5jb2duaXRvIG9yIG9uIGEgc2VwYXJhdGUgY29tcHV0ZXIvYnJvd3Nlci48L3A+CjxpbWcgc3JjPSJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vY29udGVudGtpdC9zdGF0aWMvY2ppeTd4bDlvMTd3NzAxMDM5Z3ZsMThhNS9jb2xsYWJvcmF0aXZlLWRyYWZ0LWpzLWVkaXRvci1sZWZ0LnBuZyIgLz4KPGgyPlRoZSBTdHJhdGVneTogV2ViU29ja2V0cyBhbmQgRGlmZi9QYXRjaDwvaDI+CjxwPkhlcmUgYXJlIGEgZmV3IChwcm9iYWJseSBvYnZpb3VzKSBvYnNlcnZhdGlvbnMgYWJvdXQgaG93IHRoaXMgcHJvYmxlbSBvZiBjb2xsYWJvcmF0aXZlIGVkaXRpbmcgY2FuIGJlIHRhY2tsZWQgaW4gRHJhZnRKcy48L3A+CjxwPkZyb20gdGhlIG91dHNldCwgd2Uga25vdyB0aGF0IGluIG9yZGVyIHRvIG1ha2UgRHJhZnQuSnMgY29sbGFib3JhdGl2ZSB3ZSdsbCBuZWVkIHRvIHVzZSBXZWIgU29ja2V0cy4gVGhpcyBpc24ndCAyMDA2LCAgdGhlIHVzZXIgc2hvdWxkbid0IG5lZWQgdG8gcmVmcmVzaCB0aGUgcGFnZSB0byBzZWUgZWRpdHMuPC9wPgo8cD5TaW5jZSBvdXIgdXBkYXRlcyB0byBlZGl0b3JTdGF0ZSB3aWxsIGJlIGJyb2FkY2FzdGVkIG92ZXIgd2ViIHNvY2tldHMsIHdlIGFsc28ga25vdyB0aGF0IHdlIHdpbGwgbmVlZCB0byBmcmVxdWVudGx5IHNlcmlhbGl6ZSBhbmQgZGVzZXJpYWxpemUgZWRpdG9yU3RhdGUuIEknbSB0YWxraW5nIGFib3V0IGNvbnZlcnRUb1JhdyBhbmQgY29udmVydEZyb21SYXcuIDwvcD4KPHA+VGhlIGNsaWVudCBpcyBvbmx5IHByaXZ5IHRvIGl0cyBjdXJyZW50IGVkaXRvclN0YXRlIGFuZCB3aGF0ZXZlciBpcyBicm9hZGNhc3RlZCBmcm9tIHRoZSBzZXJ2ZXIgdmlhIFdlYlNvY2tldC4gPC9wPgo8cD5IZW5jZSwgaW4gdGhpcyBzY2VuYXJpbyB0aGUgc2VydmVyIGlzIHRoZSAic291cmNlIG9mIHRydXRoLiIgSSBzdXBwb3NlIHRoaXMgd291bGRuJ3QgZGlmZmVyIGZyb20gdGhlIGNvbnZlbnRpb25hbCBzaXR1YXRpb24gd2hlcmUgcmF3IGVkaXRvclN0YXRlIGlzIHN0b3JlZCBpbiBhIGRhdGFiYXNlLiBCdXQgSSB0aGluayB0aGUgZGlmZmVyZW5jZSBpcyB0aGF0IHRoZSBmbG93IG9mIGluZm9ybWF0aW9uIGlzIGJpZGlyZWN0aW9uYWw6IHRoZSBjbGllbnQgdXBkYXRlcyBzZXJ2ZXIgc3RhdGUgYW5kIHZpY2UtdmVyc2EuIDwvcD4KPHA+U2luY2UgdGhlIHNlcnZlci1zaWRlIGVkaXRvclN0YXRlIGlzIGRlc2VyaWFsaXplZCAoaS5lLiwgbm90IGFuIGltbXV0YWJsZSBvYmplY3QgYnV0IGp1c3QgYSBwbGFuIG9sZScgamF2YXNjcmlwdCBvYmplY3QpLCB3ZSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IGNvbXB1dGluZyB0aGUgZGVsdGFzIGJldHdlZW4gaW1tdXRhYmxlIGVkaXRvclN0YXRlcy4gV2UgY2FuIGp1c3QgY29tcHV0ZSB0aGUgZGVsdGFzIGJldHdlZW4gYWxsIHRoZSByYXcgc3RhdGVzIHJlY2VpdmVkIGZyb20gdGhlIGNsaWVudHMuPC9wPgo8cD5TbyBmYXIgd2UgaGF2ZTo8L3A+Cjx1bD4KICA8bGk+V2UgbmVlZCB3ZWIgc29ja2V0czwvbGk+CiAgPGxpPlRoZSByYXcgZWRpdG9yU3RhdGUgb24gdGhlIHNlcnZlciBpcyB0aGUgInNvdXJjZSBvZiB0cnV0aCI8L2xpPgogIDxsaT5DbGllbnRzIChvciB1c2VycykgZW1pdCB0aGVpciBjdXJyZW50IHN0YXRlIGF0IHJlZ3VsYXIgaW50ZXJ2YWxzIHRvIHRoZSBzZXJ2ZXI8L2xpPgo8L3VsPgo8cD5JbiByZXNwb25zZSB0byBhbiBlbWlzc2lvbiBmcm9tIHRoZSBjbGllbnQsIHRoZSBzZXJ2ZXIgZG9lcyB0aHJlZSB0aGluZ3M6IDwvcD4KPG9sPgogIDxsaT5DYWxjdWxhdGUgYSBkZWx0YSBiZXR3ZWVuIGl0cyByYXcgc3RhdGUgYW5kIHRoZSBtb3N0IHJlY2VudGx5IGVtaXR0ZWQgY2xpZW50IHN0YXRlLjwvbGk+CiAgPGxpPlBhdGNoZXMgaXRzIG93biBpbnRlcm5hbCBzdGF0ZS48L2xpPgogIDxsaT5Ccm9hZGNhc3RzIHRvIGFsbCBjbGllbnRzIHRoZSBjYWxjdWxhdGVkIGRlbHRhLjwvbGk+Cjwvb2w+CjxwPlRoaXMgc291bmRzIGtpbmQgb2Ygcm91Z2ggYnV0IGl0J3Mgbm90IGJhZCBhdCBhbGwgd2l0aCBzb21lIHRoZSBoZWxwIG9mIHNvbWUgdGhpcmQtcGFydHkgbGlicmFyaWVzLiBJIHVzZWQganNvbmRpZmZwYXRjaCB0byBnZXQgdGhlIGRlbHRhcyBiZXR3ZWVuIHN0YXRlcy4gVGhpcyBjYW4gYmUgYXMgc2ltcGxlIGFzOjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPjxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4vLyB3ZSBzaG91bGQgd3JhcCB0aGUgcmF3IHNlcnZlclN0YXRlIGluIGEgY2xvc3VyZSwgYnV0IGZvciBicmV2aXR5IHdlJ2xsIGRvIHRoaXM8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IHJhd1NlcnZlclN0YXRlIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogIGJsb2NrczxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj5bPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+XTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+CiAgZW50aXR5TWFwPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj46PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4vLyB0aGlzIHdvdWxkIGNvbWUgZnJvbSB0aGUgY2xpZW50IHZpYSBXZWJTb2NrZXQ8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IHJhd0NsaWVudFN0YXRlIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogIGJsb2NrczxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj5bPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4gdGV4dDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J2xvcmVtJzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+IGtleTxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J0EnPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj5dPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gIDxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4vLyBzb21lIGtleXMgb21pdHRlZCBoZXJlIGZvciBicmV2aXR5PC9zcGFuPgogIGVudGl0eU1hcDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+bGV0PC9zcGFuPiBkZWx0YSA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVxdWlyZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J2pzb25kaWZmcGF0Y2gnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5kaWZmPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5yYXdTZXJ2ZXJTdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gcmF3Q2xpZW50U3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CjwvY29kZT48L3ByZT4KPHA+VGhlIGRlbHRhIGNhbiB0aGVuIGJlIHVzZWQgdG8gcGF0Y2ggdGhlIHNlcnZlciBzdGF0ZTo8L3A+CjxwcmU+PGNvZGUgY2xhc3M9Imxhbmd1YWdlLWpzIj48c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+bGV0PC9zcGFuPiBwYXRjaGVkIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5yZXF1aXJlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nanNvbmRpZmZwYXRjaCc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnBhdGNoPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5yYXdTZXJ2ZXJTdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gZGVsdGE8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PC9jb2RlPjwvcHJlPgo8cD5IZXJlJ3MgYSB3b3JraW5nIGV4YW1wbGU6PC9wPgo8cHJlPjxjb2RlIGNsYXNzPSJsYW5ndWFnZS1qcyI+PHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmNvbnN0PC9zcGFuPiBqIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5yZXF1aXJlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nanNvbmRpZmZwYXRjaCc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+Y29uc3Q8L3NwYW4+IFdlYlNvY2tldCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVxdWlyZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J3dzJzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5jb25zdDwvc3Bhbj4gaHR0cCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVxdWlyZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J2h0dHAnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmNvbnN0PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gY29uc3RhbnQiPlBPUlQ8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gcHJvY2VzczxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5lbnY8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGNvbnN0YW50Ij5QT1JUPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPnx8PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gbnVtYmVyIj4xMjM0PC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+Y29uc3Q8L3NwYW4+IHNlcnZlciA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IGh0dHA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5jcmVhdGVTZXJ2ZXI8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPmFwcDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmNvbnN0PC9zcGFuPiB3c3MgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+bmV3PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gY2xhc3MtbmFtZSI+V2ViU29ja2V0PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPlNlcnZlcjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPiBzZXJ2ZXIgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmNvbnN0PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24tdmFyaWFibGUgZnVuY3Rpb24iPmNyZWF0ZVN0b3JlPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+bGV0PC9zcGFuPiBpbml0aWFsU3RhdGUgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICBibG9ja3M8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Wzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+dGV4dDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+Jyc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+XTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+CiAgICBlbnRpdHlNYXA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPjo8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IHN0YXRlIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPi4uLjwvc3Bhbj5pbml0aWFsU3RhdGUgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IHVzZXJzIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+cmV0dXJuPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICBpbml0aWFsU3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24tdmFyaWFibGUgZnVuY3Rpb24iPmdldFN0YXRlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49Pjwvc3Bhbj4gc3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24tdmFyaWFibGUgZnVuY3Rpb24iPnBhdGNoPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPmRpZmY8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj0+PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICAgIHN0YXRlIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gajxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnBhdGNoPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5zdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gZGlmZjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+IAo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5jb25zdDwvc3Bhbj4gc3RvcmUgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmNyZWF0ZVN0b3JlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CndzczxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPm9uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nY29ubmVjdGlvbic8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+ZnVuY3Rpb248L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+Y29ubmVjdGlvbjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPndzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPiByZXE8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmNvbnN0PC9zcGFuPiB0b2tlbiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IHJlcTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5oZWFkZXJzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmNvb2tpZSA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPiZhbXA7JmFtcDs8L3NwYW4+IHJlcTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5oZWFkZXJzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmNvb2tpZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnNwbGl0PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nPSc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Wzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gbnVtYmVyIj4xPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+XTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gV2hlbiBhIG5ldyB1c2VyIGNvbm5lY3RzLCB3ZSBuZWVkIHRvIGdldCB0aGUgZGVsdGEgYmV0d2VlbiB0aGUgc2VydmVyJ3MgY3VycmVudCBzdGF0ZTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gYW5kIHRoZSBlbXB0eSwgaW5pdGlhbFN0YXRlIGFuZCBlbWl0IHRoYXQuIFRoZSBjbGllbnQgY2FuIHRoZW4gcGF0Y2g8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPi8vIGl0cyBvd24gc3RhdGUgd2hlbiB0aGUgd2luZG93IGxvYWRzLjwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+Y29uc3Q8L3NwYW4+IGRlbHRhIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gajxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmRpZmY8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPnN0b3JlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmluaXRpYWxTdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gc3RvcmU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5nZXRTdGF0ZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICB3czxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnNlbmQ8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBjb25zdGFudCI+SlNPTjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zdHJpbmdpZnk8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4gZGVsdGEgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IAogIAogIDxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4vLyBlYWNoIGNsaWVudCB3aWxsIGJyb2FkY2FzdCBpdHMgc3RhdGUgYXQgYSByZWd1bGFyIGludGVydmFsIGlmIHRoZXJlIGFyZSBjaGFuZ2VzLjwvc3Bhbj4KICB3czxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPm9uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nbWVzc2FnZSc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+ZnVuY3Rpb248L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+aW5jb21pbmc8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5kYXRhPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmxldDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPiByYXcgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBjb25zdGFudCI+SlNPTjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5wYXJzZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+ZGF0YTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gCiAgICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gMS4gR2V0IHRoZSBkZWx0YSBiZXR3ZWVuIHRoZSBzZXJ2ZXIncyBjdXJyZW50IHN0YXRlIGFuZCB0aGUgY2xpZW50LWVtaXR0ZWQgc3RhdGU8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gbm90ZSB0aGF0IGRlbHRhIHdpbGwgYmUgbnVsbCBpZiB0aGVyZSdzIG5vIGNoYW5nZS48L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+bGV0PC9zcGFuPiBkZWx0YSA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IGo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5kaWZmPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5zdG9yZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmdldFN0YXRlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPiByYXc8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+aWY8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5kZWx0YTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gMi4gV2UgbmVlZCB0byBwYXRjaCB0aGUgc2VydmVyIHN0YXRlIHNvIHRoYXQgaXQgZG9lc24ndCBiZWNvbWUgc3RhbGU8L3NwYW4+CiAgICAgIHN0b3JlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cGF0Y2g8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPmRlbHRhPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogICAgICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gMy4gRW1pdCB0aGUgZGVsdGEgdG8gYWxsIG9mIHRoZSBjbGllbnRzLjwvc3Bhbj4KICAgICAgd3NzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmNsaWVudHM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5mb3JFYWNoPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+ZnVuY3Rpb248L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+ZWFjaDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPmNsaWVudDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgICAgICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+aWY8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5jbGllbnQgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4hPT08L3NwYW4+IHdzIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+JmFtcDsmYW1wOzwvc3Bhbj4gY2xpZW50PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPnJlYWR5U3RhdGUgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PT08L3NwYW4+IFdlYlNvY2tldDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gY29uc3RhbnQiPk9QRU48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICAgICAgICBjbGllbnQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zZW5kPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gY29uc3RhbnQiPkpTT048L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+c3RyaW5naWZ5PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+IGRlbHRhIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICAgICAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgpzZXJ2ZXI8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5saXN0ZW48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBjb25zdGFudCI+UE9SVDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICBjb25zb2xlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+bG9nPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gdGVtcGxhdGUtc3RyaW5nIj48c3BhbiBjbGFzcz0idG9rZW4gdGVtcGxhdGUtcHVuY3R1YXRpb24gc3RyaW5nIj5gPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPmxpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0Ojwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gaW50ZXJwb2xhdGlvbiI+PHNwYW4gY2xhc3M9InRva2VuIGludGVycG9sYXRpb24tcHVuY3R1YXRpb24gcHVuY3R1YXRpb24iPiR7PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBjb25zdGFudCI+UE9SVDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHRlbXBsYXRlLXB1bmN0dWF0aW9uIHN0cmluZyI+YDwvc3Bhbj48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgo8L2NvZGU+PC9wcmU+CjxwPkhlbmNlLCB3ZSBhcmUgbGVhbmluZyBoZWF2aWx5IG9uIGpzb25kaWZmcGF0Y2ggdG8gZG8gdGhlIGhlYXZ5IGxpZnRpbmcuIDwvcD4KPHA+Tm93IGxldCdzIGxvb2sgYXQgdGhlIGNsaWVudCBzaWRlLjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5pbXBvcnQ8L3NwYW4+IFJlYWN0IDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5mcm9tPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4ncmVhY3QnPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+aW1wb3J0PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+IEVkaXRvcjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gRWRpdG9yU3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+IGNvbnZlcnRUb1JhdzxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gY29udmVydEZyb21SYXcgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+ZnJvbTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J2RyYWZ0LWpzJzwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmltcG9ydDwvc3Bhbj4gZGVib3VuY2UgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmZyb208L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidkZWJvdW5jZSc8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5pbXBvcnQ8L3NwYW4+IGogPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmZyb208L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidqc29uZGlmZnBhdGNoJzwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmNsYXNzPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gY2xhc3MtbmFtZSI+Q29sbGFib3JhdGl2ZUVkaXRvcjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPmV4dGVuZHM8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBjbGFzcy1uYW1lIj5SZWFjdDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5Db21wb25lbnQ8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICBzdGF0ZSA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIGVkaXRvclN0YXRlPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj46PC9zcGFuPiBFZGl0b3JTdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmNyZWF0ZUVtcHR5PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgogIAogIF9pc1VubW91bnRlZCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBib29sZWFuIj5mYWxzZTwvc3Bhbj4KICAgIAogIDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+Y29tcG9uZW50RGlkTW91bnQ8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IGhvc3QgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiB3aW5kb3c8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+bG9jYXRpb248c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+b3JpZ2luPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVwbGFjZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHJlZ2V4Ij4vXmh0dHAvPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J3dzJzwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dGhpczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+d3MgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+bmV3PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gY2xhc3MtbmFtZSI+d2luZG93PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPldlYlNvY2tldDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+aG9zdDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj50aGlzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj53czxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24tdmFyaWFibGUgZnVuY3Rpb24iPm9ubWVzc2FnZTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHBhcmFtZXRlciI+ZXZlbnQ8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj0+PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5pZjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj50aGlzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5faXNVbm1vdW50ZWQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5yZXR1cm48L3NwYW4+CiAgICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj50aGlzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmhhbmRsZU1lc3NhZ2U8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBjb25zdGFudCI+SlNPTjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5wYXJzZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+ZXZlbnQ8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+ZGF0YTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgogICAgCiAgPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5jb21wb25lbnRXaWxsVW5tb3VudDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnRoaXM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPndzPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+Y2xvc2U8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5kZWxldGU8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj50aGlzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj53cwogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnRoaXM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPl9pc1VubW91bnRlZCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBib29sZWFuIj50cnVlPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICAKICA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24tdmFyaWFibGUgZnVuY3Rpb24iPmhhbmRsZU1lc3NhZ2U8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwYXJhbWV0ZXIiPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4gZGVsdGEgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5pZjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+ITwvc3Bhbj5kZWx0YTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnJldHVybjwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IHJhdyA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+Y29udmVydFRvUmF3PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dGhpczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+c3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+ZWRpdG9yU3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5nZXRDdXJyZW50Q29udGVudDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5sZXQ8L3NwYW4+IG5leHRDb250ZW50U3RhdGUgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmNvbnZlcnRGcm9tUmF3PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5qPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cGF0Y2g8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPnJhdzxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gZGVsdGE8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnRoaXM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+c2V0U3RhdGU8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgICAgZWRpdG9yU3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPjo8L3NwYW4+IEVkaXRvclN0YXRlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cHVzaDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+ZWRpdG9yU3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPiw8L3NwYW4+IG5leHRDb250ZW50U3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KIAogIGJyb2FkY2FzdCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+ZGVib3VuY2U8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5lZGl0b3JTdGF0ZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5pZjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+ITwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dGhpczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+d3M8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj5yZXR1cm48L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+dGhpczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+d3M8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zZW5kPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gY29uc3RhbnQiPkpTT048L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+c3RyaW5naWZ5PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICAgIHJhdzxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5jb252ZXJ0VG9SYXc8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPmVkaXRvclN0YXRlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+Z2V0Q3VycmVudENvbnRlbnQ8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4sPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gbnVtYmVyIj4zMDA8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogCiAgPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uLXZhcmlhYmxlIGZ1bmN0aW9uIj5vbkNoYW5nZTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5lZGl0b3JTdGF0ZTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj49Pjwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnRoaXM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+YnJvYWRjYXN0PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj5lZGl0b3JTdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj50aGlzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnNldFN0YXRlPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+IGVkaXRvclN0YXRlIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+cmVuZGVyPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5d29yZCI+cmV0dXJuPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPig8L3NwYW4+CiAgICAgIDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Jmx0Ozwvc3Bhbj5FZGl0b3IgCiAgICAgICAgZWRpdG9yU3RhdGU8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj57PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXl3b3JkIj50aGlzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5zdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ljwvc3Bhbj5lZGl0b3JTdGF0ZTxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KICAgICAgICBvbkNoYW5nZTxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPns8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGtleXdvcmQiPnRoaXM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPm9uQ2hhbmdlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPgogICAgICA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPi88L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4+PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4pPC9zcGFuPgogIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+fTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj59PC9zcGFuPjwvY29kZT48L3ByZT4KPGltZyBzcmM9Imh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9jb250ZW50a2l0L3N0YXRpYy9jaml5N3hsOW8xN3c3MDEwMzlndmwxOGE1L2RyYWZ0LWpzLWNvbGxhYm9yYXRpdmUtZWRpdG9yLnBuZyIgLz4KPHA+QXMgeW91IG1pZ2h0IGV4cGVjdCwgd2U6PC9wPgo8dWw+CiAgPGxpPlVzZSB0aGUgPGNvZGU+Y29tcG9uZW50RGlkTW91bnQ8L2NvZGU+IGFuZCA8Y29kZT5jb21wb25lbnRXaWxsVW5tb3VudDwvY29kZT4gbGlmZWN5Y2xlIGhvb2tzIHRvIG1hbmFnZSB0aGUgY2xpZW50IFdlYlNvY2tldCBjb25uZWN0aW9uLjwvbGk+CiAgPGxpPldoZW5ldmVyIG9uQ2hhbmdlIGlzIGNhbGxlZCBieSB0aGUgRHJhZnQgRWRpdG9yLCB3ZSBhbHNvIGludm9rZSA8Y29kZT50aGlzLmJyb2FkY2FzdDwvY29kZT4uIFRoZSBicm9hZGNhc3QgY2xhc3MgbWV0aG9kIGlzIGRlYm91bmNlZCBmb3Igb2J2aW91cyByZWFzb25zICh0byBhdm9pZCBmbG9vZGluZyB0aGUgY2hhbm5lbCkuIFdlIGJyb2FkY2FzdCB0byB0aGUgc2VydmVyIHRoZSBjbGllbnQncyBjdXJyZW50IHJhdywgc2VyaWFsaXplZCBzdGF0ZSBldmVyIDMwMCBtcyB1c2luZyB0aGUgdGhpcmQtcGFydHkgbGlicmFyeSA8Y29kZT5kZWJvdW5jZTwvY29kZT4uPC9saT4KICA8bGk+V2hlbiB0aGUgY2xpZW50IHJlY2VpdmVzIGEgZGVsdGEgZnJvbSB0aGUgc2VydmVyLCB3ZSBhZ2FpbiB1c2UgY29udmVydFRvUmF3IHRvIGdldCB0aGUgbW9zdCByZWNlbnQgcmF3IGNsaWVudC1zaWRlIHN0YXRlLiAmbmJzcDtXZSB0aGVuIHBhdGNoIHRoZSBjbGllbnQgc2lkZSBzdGF0ZSAodXNpbmcgPGNvZGU+anNvbmRpZmZwYXRjaDwvY29kZT4pIGFuZCB0aGVuIHVubWFyc2hhbCB0aGUgcmVzdWx0IHRvIHJlaHlkcmF0ZSB0aGUgY2xpZW50LXNpZGUgZWRpdG9yU3RhdGUuJm5ic3A7PC9saT4KPC91bD4KPHA+SW4gcGFydCB0d28sIHdlJ2xsIGRpc2N1c3Mgc2VsZWN0aW9uIHN0YXRlIGJvb2trZWVwaW5nIGluIGNvbGxhYm9yYXRpdmUgZWRpdGluZy4gRm9yIGV4YW1wbGUsIHdlIHdhbnQgdG8gYXR0cmlidXRlIGFub3RoZXIgdXNlcidzIGVkaXRzIHRvIGEgZG9jdW1lbnQgdG8gdGhhdCB1c2VyIHJhdGhlciB0aGFuIHRoZSBjdXJyZW50LCBlZGl0aW5nIHVzZXIuPC9wPg==","excerpt":"","image":{"id":"cjiy862wv199u01032y8co8g7","url":"static/cjiy7xl9o17w701039gvl18a5/draft-js.png"},"posts_tags":[{"tag":{"id":"1q3fvn94th4blyj7f35g","name":"React"}},{"tag":{"id":"t7vcbh4nik23ubopwib7","name":"Draft JS"}}],"date":"06/28/2020","html":"<p>Draft.Js is a popular rich text editor intended to be used with React. Unsurprisingly, it is also created by Facebook.</p>\n<p>Like other rich text editors, Draft.js is a wrapper around contenteditable and the native Selection API. If you've ever worked with the native contenteditable and window.Selection you will know that they are a huge pain. Nick Santos wrote a very persuasive article about how contenteditable is mathematically doomed to fail.</p>\n<img src=\"https://s3.amazonaws.com/contentkit/static/cjiy7xl9o17w701039gvl18a5/draft-js-2.png\" />\n<p>DraftJs depends on immutable state management. This has a number of advantages. For example, since editorState is immutable, we can cheaply check whether a component should update:</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> React<span class=\"token punctuation\">.</span>Component <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps<span class=\"token punctuation\">,</span> nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> nextProps<span class=\"token punctuation\">.</span>editorState <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>editorState\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>However immutability does not come without performance penalties. Immutability also contributes to code complexity - some things are not as easy as they should be in Draft.Js. For example, this is the code needed to insert an empty block into the editor.</p>\n<h2>Creating A Collaborative Editor</h2>\n<p>You've probably used Google docs. It's collaborative. If I'm editing the same document as my friend, Google Docs keeps track of and displays team member's changes simultaneously. Moreover, edits are annotated. Can the same thing be accomplished using Draft.Js?</p>\n<p>Here's my first attempt (and here's the source). Note: a cookie is used, so in order for the server to detect two distinct users you'll need to open a new window in incognito or on a separate computer/browser.</p>\n<img src=\"https://s3.amazonaws.com/contentkit/static/cjiy7xl9o17w701039gvl18a5/collaborative-draft-js-editor-left.png\" />\n<h2>The Strategy: WebSockets and Diff/Patch</h2>\n<p>Here are a few (probably obvious) observations about how this problem of collaborative editing can be tackled in DraftJs.</p>\n<p>From the outset, we know that in order to make Draft.Js collaborative we'll need to use Web Sockets. This isn't 2006,  the user shouldn't need to refresh the page to see edits.</p>\n<p>Since our updates to editorState will be broadcasted over web sockets, we also know that we will need to frequently serialize and deserialize editorState. I'm talking about convertToRaw and convertFromRaw. </p>\n<p>The client is only privy to its current editorState and whatever is broadcasted from the server via WebSocket. </p>\n<p>Hence, in this scenario the server is the \"source of truth.\" I suppose this wouldn't differ from the conventional situation where raw editorState is stored in a database. But I think the difference is that the flow of information is bidirectional: the client updates server state and vice-versa. </p>\n<p>Since the server-side editorState is deserialized (i.e., not an immutable object but just a plan ole' javascript object), we don't need to worry about computing the deltas between immutable editorStates. We can just compute the deltas between all the raw states received from the clients.</p>\n<p>So far we have:</p>\n<ul>\n  <li>We need web sockets</li>\n  <li>The raw editorState on the server is the \"source of truth\"</li>\n  <li>Clients (or users) emit their current state at regular intervals to the server</li>\n</ul>\n<p>In response to an emission from the client, the server does three things: </p>\n<ol>\n  <li>Calculate a delta between its raw state and the most recently emitted client state.</li>\n  <li>Patches its own internal state.</li>\n  <li>Broadcasts to all clients the calculated delta.</li>\n</ol>\n<p>This sounds kind of rough but it's not bad at all with some the help of some third-party libraries. I used jsondiffpatch to get the deltas between states. This can be as simple as:</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// we should wrap the raw serverState in a closure, but for brevity we'll do this</span>\n<span class=\"token keyword\">let</span> rawServerState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  blocks<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  entityMap<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// this would come from the client via WebSocket</span>\n<span class=\"token keyword\">let</span> rawClientState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  blocks<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> text<span class=\"token operator\">:</span> <span class=\"token string\">'lorem'</span><span class=\"token punctuation\">,</span> key<span class=\"token operator\">:</span> <span class=\"token string\">'A'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// some keys omitted here for brevity</span>\n  entityMap<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> delta <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsondiffpatch'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>rawServerState<span class=\"token punctuation\">,</span> rawClientState<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>The delta can then be used to patch the server state:</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">let</span> patched <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsondiffpatch'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>rawServerState<span class=\"token punctuation\">,</span> delta<span class=\"token punctuation\">)</span></code></pre>\n<p>Here's a working example:</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">const</span> j <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jsondiffpatch'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> WebSocket <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ws'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">||</span> <span class=\"token number\">1234</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> wss <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebSocket<span class=\"token punctuation\">.</span>Server</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> server <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createStore</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    blocks<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>text<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    entityMap<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">let</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>initialState <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    initialState<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">getState</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">patch</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">diff</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state <span class=\"token operator\">=</span> j<span class=\"token punctuation\">.</span><span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> diff<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nwss<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'connection'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token function\">connection</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ws<span class=\"token punctuation\">,</span> req</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span>cookie <span class=\"token operator\">&amp;&amp;</span> req<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'='</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n  <span class=\"token comment\">// When a new user connects, we need to get the delta between the server's current state</span>\n  <span class=\"token comment\">// and the empty, initialState and emit that. The client can then patch</span>\n  <span class=\"token comment\">// its own state when the window loads.</span>\n  <span class=\"token keyword\">const</span> delta <span class=\"token operator\">=</span> j<span class=\"token punctuation\">.</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>initialState<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  ws<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> delta <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n  \n  <span class=\"token comment\">// each client will broadcast its state at a regular interval if there are changes.</span>\n  ws<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token function\">incoming</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> raw <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> \n    <span class=\"token comment\">// 1. Get the delta between the server's current state and the client-emitted state</span>\n    <span class=\"token comment\">// note that delta will be null if there's no change.</span>\n    <span class=\"token keyword\">let</span> delta <span class=\"token operator\">=</span> j<span class=\"token punctuation\">.</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> raw<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>delta<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 2. We need to patch the server state so that it doesn't become stale</span>\n      store<span class=\"token punctuation\">.</span><span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>delta<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 3. Emit the delta to all of the clients.</span>\n      wss<span class=\"token punctuation\">.</span>clients<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">each</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">client</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>client <span class=\"token operator\">!==</span> ws <span class=\"token operator\">&amp;&amp;</span> client<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">===</span> WebSocket<span class=\"token punctuation\">.</span><span class=\"token constant\">OPEN</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          client<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> delta <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">listening on http://localhost:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>Hence, we are leaning heavily on jsondiffpatch to do the heavy lifting. </p>\n<p>Now let's look at the client side.</p>\n<pre><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Editor<span class=\"token punctuation\">,</span> EditorState<span class=\"token punctuation\">,</span> convertToRaw<span class=\"token punctuation\">,</span> convertFromRaw <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'draft-js'</span>\n<span class=\"token keyword\">import</span> debounce <span class=\"token keyword\">from</span> <span class=\"token string\">'debounce'</span>\n<span class=\"token keyword\">import</span> j <span class=\"token keyword\">from</span> <span class=\"token string\">'jsondiffpatch'</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CollaborativeEditor</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    editorState<span class=\"token operator\">:</span> EditorState<span class=\"token punctuation\">.</span><span class=\"token function\">createEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  \n  _isUnmounted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    \n  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> host <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>origin<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^http/</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ws'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ws <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">window<span class=\"token punctuation\">.</span>WebSocket</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onmessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_isUnmounted<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMessage</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n    \n  <span class=\"token function\">componentWillUnmount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">delete</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ws\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_isUnmounted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function-variable function\">handleMessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> delta <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>delta<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n    <span class=\"token keyword\">let</span> raw <span class=\"token operator\">=</span> <span class=\"token function\">convertToRaw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>editorState<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> nextContentState <span class=\"token operator\">=</span> <span class=\"token function\">convertFromRaw</span><span class=\"token punctuation\">(</span>j<span class=\"token punctuation\">.</span><span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>raw<span class=\"token punctuation\">,</span> delta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      editorState<span class=\"token operator\">:</span> EditorState<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>editorState<span class=\"token punctuation\">,</span> nextContentState<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n \n  broadcast <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">editorState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ws<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      raw<span class=\"token operator\">:</span> <span class=\"token function\">convertToRaw</span><span class=\"token punctuation\">(</span>editorState<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n \n  <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">editorState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">broadcast</span><span class=\"token punctuation\">(</span>editorState<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> editorState <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Editor \n        editorState<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>editorState<span class=\"token punctuation\">}</span>\n        onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<img src=\"https://s3.amazonaws.com/contentkit/static/cjiy7xl9o17w701039gvl18a5/draft-js-collaborative-editor.png\" />\n<p>As you might expect, we:</p>\n<ul>\n  <li>Use the <code>componentDidMount</code> and <code>componentWillUnmount</code> lifecycle hooks to manage the client WebSocket connection.</li>\n  <li>Whenever onChange is called by the Draft Editor, we also invoke <code>this.broadcast</code>. The broadcast class method is debounced for obvious reasons (to avoid flooding the channel). We broadcast to the server the client's current raw, serialized state ever 300 ms using the third-party library <code>debounce</code>.</li>\n  <li>When the client receives a delta from the server, we again use convertToRaw to get the most recent raw client-side state. &nbsp;We then patch the client side state (using <code>jsondiffpatch</code>) and then unmarshal the result to rehydrate the client-side editorState.&nbsp;</li>\n</ul>\n<p>In part two, we'll discuss selection state bookkeeping in collaborative editing. For example, we want to attribute another user's edits to a document to that user rather than the current, editing user.</p>"}}}}