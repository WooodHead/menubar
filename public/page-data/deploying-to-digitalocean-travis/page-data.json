{"componentChunkName":"component---src-components-post-tsx","path":"/deploying-to-digitalocean-travis","result":{"pageContext":{"post":{"id":"cjeqgfqjknnq20199oe3zwi37","title":"Deploying To DigitalOcean From Travis","slug":"deploying-to-digitalocean-travis","published_at":"2019-08-25T04:00:00","created_at":"2018-03-14T02:16:39","encoded_html":"PHA+SWYgeW91J3JlIGhlcmUsIEkgcHJvYmFibHkgZG9uJ3QgbmVlZCB0byBlc3BvdXNlIHRoZSBiZW5lZml0cyBvZiB1c2luZyBUcmF2aXMuPC9wPgo8aDI+U3RyYXRlZ3k8L2gyPgo8cD5UbyBkZXBsb3kgdG8gRGlnaXRhbE9jZWFuLCB3ZSdsbCB1c2Ugc29tZSBiYXNoIHNjcmlwdHMgdGhhdCBhcmUgZXhlY3V0ZWQgYWZ0ZXIgdGhlIHRyYXZpcyBidWlsZC48L3A+CjxwPkhlcmUncyB3aGF0IHdpbGwgaGFwcGVuIHdoZW4geW91IGNvbW1pdCBjaGFuZ2VzIHRvIHlvdXIgZ2l0aHViIHJlcG8uPC9wPgo8dWw+CiAgPGxpPlRyYXZpcyB3aWxsIHN0YXJ0IHRoZSBidWlsZDwvbGk+CiAgPGxpPlRyYXZpcyB3aWxsIGRlY3J5cHQgcHJpdmF0ZSBTU0gga2V5cyB0byBhY2Nlc3Mgb3VyIGRyb3BsZXQ8L2xpPgogIDxsaT5UcmF2aXMgd2lsbCBtb3ZlIHRoZSBzc2gga2V5cyB0byB+Ly5zc2gvaWRfcnNhIG9uIHRoZSB2aXJ0dWFsIG1hY2hpbmU8L2xpPgogIDxsaT5UcmF2aXMgd2lsbCBpbnN0YWxsIGRlcGVuZGVuY2llcyBhbmQgY3JlYXRlIGEgLnRneiBmaWxlIChUQVIgYXJjaGl2ZSkgdGhhdCBjb250YWlucyBvdXIgcHJvamVjdCBidWlsZDwvbGk+CiAgPGxpPlRyYXZpcyB3aWxsIGV4ZWN1dGUgYSBiYXNoIHNjcmlwdCB0aGF0IHVwbG9hZHMgdGhlIHBhY2thZ2UudGd6IHdpdGggb3VyIGJ1aWxkIHZpYSA8YSBocmVmPSJodHRwOi8vd3d3Lmh5cGV4ci5vcmcvbGludXhfc2NwX2hlbHAucGhwIj5zY3A8L2E+PC9saT4KICA8bGk+VHJhdmlzIHdpbGwgc3NoIGludG8gb3VyIGRyb3BsZXQsIGluc3RhbGwgZGVwZW5kZW5jaWVzLCBhbmQgc3RhcnQgdGhlIHNlcnZlcjwvbGk+CjwvdWw+CjxoMj5JbmZvIFlvdSdsbCBOZWVkPC9oMj4KPHVsPgogIDxsaT5Zb3VyIGRvbWFpbiBuYW1lPC9saT4KICA8bGk+WW91ciBkcm9wbGV0IGlwIGFkZHJlc3MgKCZsdDtjb2RlJmd0O3BpbmcgeW91cl9kb21haW4uY29tJmx0Oy9jb2RlJmd0Oyk8L2xpPgo8L3VsPgo8aDI+VG8gU3RhcnQ8L2gyPgo8cHJlPjxjb2RlIGNsYXNzPSJsYW5ndWFnZS1iYXNoIj48c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj5jZDwvc3Bhbj4gbXktcHJvamVjdCAKPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj50b3VjaDwvc3Bhbj4gLnRyYXZpcy55bWwgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPiMgaWYgeW91IGRvbid0IGFscmVhZHkgaGF2ZSBvbmU8L3NwYW4+PC9jb2RlPjwvcHJlPgo8cD5IZXJlJ3MgYSBzYW1wbGUgLnRyYXZpcy55bWw6PC9wPgo8cHJlPjxjb2RlIGNsYXNzPSJsYW5ndWFnZS15YW1sIj48c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+bGFuZ3VhZ2U8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPiBub2RlQ3JlYXRlIHB1YmxpYyBhbmQgcHJpdmF0ZSBTU0gga2V5c2pzCjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXkgYXRydWxlIj5ub2RlanM8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi08L3NwYW4+IDYuOS4xCjxzcGFuIGNsYXNzPSJ0b2tlbiBrZXkgYXRydWxlIj5ub3RpZmljYXRpb25zPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ojwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+ZW1haWw8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPgogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleSBhdHJ1bGUiPm9uZmFpbHVyZTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IGNoYW5nZQogICAgPHNwYW4gY2xhc3M9InRva2VuIGtleSBhdHJ1bGUiPm9uc3VjY2Vzczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+IGNoYW5nZQo8c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+YWRkb25zPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ojwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+c3Noa25vd25ob3N0czwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4tPC9zcGFuPiAxMjMuNDUuNTYuNzggPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPiMgeW91ciBkcm9wbGV0IElQIGdvZXMgaGVyZTwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGtleSBhdHJ1bGUiPmJyYW5jaGVzPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ojwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+b25seTwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4tPC9zcGFuPiBtYXN0ZXIKPHNwYW4gY2xhc3M9InRva2VuIGtleSBhdHJ1bGUiPmVudjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIGtleSBhdHJ1bGUiPmdsb2JhbDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4tPC9zcGFuPiBSRU1PVEVBUFBESVI9L3Zhci93d3cvTVlET01BSU4uQ09NLwogIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LTwvc3Bhbj4gUkVNT1RFVVNFUj1kZXBsb3kKICA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi08L3NwYW4+IFJFTU9URUhPU1Q9MTIzLjQ1LjU2Ljc4IDxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4jIHlvdXIgZHJvcGxldCBJUCBnb2VzIGhlcmU8L3NwYW4+CiAgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4tPC9zcGFuPiBQT1JUPTgwODAKPHNwYW4gY2xhc3M9InRva2VuIGtleSBhdHJ1bGUiPmJlZm9yZWluc3RhbGw8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj46PC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi08L3NwYW4+IG5wbSBpbnN0YWxsIDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LTwvc3Bhbj5nIG5wbUBeMgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+aW5zdGFsbDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LTwvc3Bhbj4gbnBtIGluc3RhbGwgPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4tPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LTwvc3Bhbj5vbmx5PWRldgo8c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+YmVmb3Jlc2NyaXB0PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+Ojwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4tPC9zcGFuPiBjaG1vZCA2MDAgZGVwbG95IDxzcGFuIGNsYXNzPSJ0b2tlbiBpbXBvcnRhbnQiPiZhbXA7JmFtcDs8L3NwYW4+IG12IGRlcGxveSB+Ly5zc2gvaWRyc2EKPHNwYW4gY2xhc3M9InRva2VuIGtleSBhdHJ1bGUiPnNjcmlwdDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LTwvc3Bhbj4gbnBtIHJ1biBidWlsZAo8c3BhbiBjbGFzcz0idG9rZW4ga2V5IGF0cnVsZSI+YWZ0ZXJfc3VjY2Vzczwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPjo8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+Ii4vc2NyaXB0cy9kZXBsb3kuc2giPC9zcGFuPjwvY29kZT48L3ByZT4KPHA+T24geW91ciBsb2NhbCBtYWNoaW5lLCBvcGVuIHRlcm1pbmFsIGFuZCBjcmVhdGUga2V5cy48L3A+CjxwcmU+PGNvZGUgY2xhc3M9Imxhbmd1YWdlLWJhc2giPnNzaC1rZXlnZW4gLWYgfi8uc3NoL2RlcGxveQpzc2gtYWRkIC1LIH4vLnNzaC9kZXBsb3kgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPiMgYWRkIHlvdXIgU1NIIHByaXZhdGUga2V5IGFuZCBzdG9yZSBwYXNzd29yZCBpbiBrZXljaGFpbjwvc3Bhbj48L2NvZGU+PC9wcmU+CjxmaWd1cmU+PGltZyBzcmM9Imh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9jb250ZW50a2l0LWRldi1kZXBsb3ltZW50YnVja2V0LTNobGNicXg5ZjlubC9zdGF0aWMvY2plcWdmcWprbm5xMjAxOTlvZTN6d2kzNy9kaWdpdGFsb2NlYW4uanBlZyIvPjwvZmlndXJlPgo8aDI+Q3JlYXRpbmcgQSBOZXcgVWJ1bnR1IFNlcnZlcjwvaDI+CjxwPlJlc291cmNlOiBuZXcgdWJ1bnR1IHVzZXIuPC9wPgo8cHJlPjxjb2RlIGNsYXNzPSJsYW5ndWFnZS1iYXNoIj48c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnNzaDwvc3Bhbj4gdXNlckAxMjMuNDUuNTYuNzgKPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zdTwvc3Bhbj4gLSByb290IDxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4jIHN3aXRjaCB0byByb290IDwvc3Bhbj4KYWRkdXNlciBkZXBsb3kgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPiMgYWRkIGEgbmV3IHVzZXI8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+dXNlcm1vZDwvc3Bhbj4gLWFHIDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+c3Vkbzwvc3Bhbj4gZGVwbG95CjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+c3U8L3NwYW4+IC0gZGVwbG95IDxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4jIyBzd2l0Y2ggdG8gbmV3bHkgY3JlYXRlZCB1c2VyICdkZXBsb3knPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmNhdDwvc3Bhbj4gfi8uc3NoL2RlcGxveS5wdWIgPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj58PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnNzaDwvc3Bhbj4gdXNlckAxMjMuNDUuNTYuNzggPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+Im1rZGlyIC1wIH4vLnNzaCAmYW1wOyZhbXA7IGNhdCA+PiAgfi8uc3NoL2F1dGhvcml6ZWRfa2V5cyI8L3NwYW4+PC9jb2RlPjwvcHJlPgo8aDI+Q29weSBsb2NhbCBwcml2YXRlIGtleSB0byBwcm9qZWN0IGZvbGRlcjwvaDI+CjxwPkxvY2FsbHksIHdlJ2xsIGRvIHRoZSBmb2xsb3dpbmcuPC9wPgo8cHJlPjxjb2RlIGNsYXNzPSJsYW5ndWFnZS1iYXNoIj48c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj5jZDwvc3Bhbj4gbXktcHJvamVjdAo8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPmNwPC9zcGFuPiB+Ly5zc2gvZGVwbG95IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+Pjwvc3Bhbj4gLi9kZXBsb3kgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPiMjIGNvcHkgcHJpdmF0ZSBrZXlzIHRvIHByb2plY3QgZGlyZWN0b3J5PC9zcGFuPgp0cmF2aXMgZW5jcnlwdC1maWxlIGRlcGxveSAtLWFkZAo8c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj5lY2hvPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gc3RyaW5nIj4nZGVwbG95Jzwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4+Pjwvc3Bhbj4gLmdpdGlnbm9yZSA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+IyMgbWFrZSBzdXJlIHlvdXIgcHJpdmF0ZSBrZXkgaXMgLmdpdGlnbm9yZWQhPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnJtPC9zcGFuPiBkZXBsb3kgPHNwYW4gY2xhc3M9InRva2VuIGNvbW1lbnQiPiMjIGV2ZW4gYmV0dGVyPC9zcGFuPjwvY29kZT48L3ByZT4KPGgzPk5vdGVzPC9oMz4KPHVsPgogIDxsaT5UaGlzIGFzc3VtZXMgeW91J3ZlIGluc3RhbGxlZCB0aGUgdHJhdmlzLWNpIGdlbTwvbGk+CiAgPGxpPlRoaXMgYXNzdW1lcyB5b3UndmUgZW5hYmxlZCB0aGUgcHJvamVjdCAoJmx0O2NvZGUmZ3Q7dHJhdmlzIGVuYWJsZSZsdDsvY29kZSZndDspPC9saT4KICA8bGk+VGhpcyBhc3N1bWVzIHlvdSd2ZSBjcmVhdGVkIGEgLnRyYXZpcy55bWwgY29uZmlnIGZpbGUgKG90aGVyd2lzZSAtLWFkZCB3b24ndCB3b3JrKS48L2xpPgo8L3VsPgo8aDI+RGVwbG95bWVudCBzY3JpcHRzPC9oMj4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtYmFzaCI+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5ta2Rpcjwvc3Bhbj4gc2NyaXB0czwvY29kZT48L3ByZT4KPGgzPnNjcmlwdHMvZGVwbG95LnNoPC9oMz4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtYmFzaCI+PHNwYW4gY2xhc3M9InRva2VuIHNoZWJhbmcgaW1wb3J0YW50Ij4jIS91c3IvYmluL2VudiBzaDwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGJ1aWx0aW4gY2xhc3MtbmFtZSI+c2V0PC9zcGFuPiAteAo8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnRhcjwvc3Bhbj4gLWN6ZiBwYWNrYWdlLnRneiBidWlsZCA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPiZhbXA7JmFtcDs8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+XDwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zY3A8L3NwYW4+IHBhY2thZ2UudGd6IDxzcGFuIGNsYXNzPSJ0b2tlbiB2YXJpYWJsZSI+JFJFTU9URV9VU0VSPC9zcGFuPkA8c3BhbiBjbGFzcz0idG9rZW4gdmFyaWFibGUiPiRSRU1PVEVfSE9TVDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj46PC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiB2YXJpYWJsZSI+JFJFTU9URV9BUFBfRElSPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPiZhbXA7JmFtcDs8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+XDwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5zc2g8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiB2YXJpYWJsZSI+JFJFTU9URV9VU0VSPC9zcGFuPkA8c3BhbiBjbGFzcz0idG9rZW4gdmFyaWFibGUiPiRSRU1PVEVfSE9TVDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIHN0cmluZyI+J2Jhc2ggLXMnPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPiZsdDs8L3NwYW4+IC4vc2NyaXB0cy91bnRhci5zaDwvY29kZT48L3ByZT4KPGgzPnNjcmlwdHMvdW50YXIuc2g8L2gzPgo8cHJlPjxjb2RlIGNsYXNzPSJsYW5ndWFnZS1iYXNoIj48c3BhbiBjbGFzcz0idG9rZW4gc2hlYmFuZyBpbXBvcnRhbnQiPiMhL3Vzci9iaW4vZW52IHNoPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj5zZXQ8L3NwYW4+IC14CjxzcGFuIGNsYXNzPSJ0b2tlbiBidWlsdGluIGNsYXNzLW5hbWUiPmV4cG9ydDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIGFzc2lnbi1sZWZ0IHZhcmlhYmxlIj5OT0RFX0VOVjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+cHJvZHVjdGlvbgo8c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj5leHBvcnQ8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBhc3NpZ24tbGVmdCB2YXJpYWJsZSI+TlZNX0JJTjwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGVudmlyb25tZW50IGNvbnN0YW50Ij4kSE9NRTwvc3Bhbj4vLm52bS92ZXJzaW9ucy9ub2RlL3Y2LjkuMC9iaW4KPHNwYW4gY2xhc3M9InRva2VuIGJ1aWx0aW4gY2xhc3MtbmFtZSI+Y2Q8L3NwYW4+IC92YXIvd3d3L1lPVVItRE9NQUlOLmNvbSA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPiZhbXA7JmFtcDs8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+XDwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj50YXI8L3NwYW4+IHp4dmYgcGFja2FnZS50Z3ogLUMgPHNwYW4gY2xhc3M9InRva2VuIGJ1aWx0aW4gY2xhc3MtbmFtZSI+Ljwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4mYW1wOyZhbXA7PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPlw8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+bXY8L3NwYW4+IGJ1aWxkL3BhY2thZ2UuanNvbiA8c3BhbiBjbGFzcz0idG9rZW4gYnVpbHRpbiBjbGFzcy1uYW1lIj4uPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPiZhbXA7JmFtcDs8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+XDwvc3Bhbj4KPHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uIj5ucG08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+aW5zdGFsbDwvc3Bhbj4gPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4mYW1wOyZhbXA7PC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPlw8L3NwYW4+CjxzcGFuIGNsYXNzPSJ0b2tlbiBmdW5jdGlvbiI+bnBtPC9zcGFuPiBydW4gc3RhcnQ8L2NvZGU+PC9wcmU+","excerpt":"If you're here, I probably don't need to espouse the benefits of using Travis.","image":{"id":"cjfwkjfl416lk017993wc3asq","url":"static/cjeqgfqjknnq20199oe3zwi37/digitalocean.jpeg"},"posts_tags":[],"date":"08/25/2019","html":"<p>If you're here, I probably don't need to espouse the benefits of using Travis.</p>\n<h2>Strategy</h2>\n<p>To deploy to DigitalOcean, we'll use some bash scripts that are executed after the travis build.</p>\n<p>Here's what will happen when you commit changes to your github repo.</p>\n<ul>\n  <li>Travis will start the build</li>\n  <li>Travis will decrypt private SSH keys to access our droplet</li>\n  <li>Travis will move the ssh keys to ~/.ssh/id_rsa on the virtual machine</li>\n  <li>Travis will install dependencies and create a .tgz file (TAR archive) that contains our project build</li>\n  <li>Travis will execute a bash script that uploads the package.tgz with our build via <a href=\"http://www.hypexr.org/linux_scp_help.php\">scp</a></li>\n  <li>Travis will ssh into our droplet, install dependencies, and start the server</li>\n</ul>\n<h2>Info You'll Need</h2>\n<ul>\n  <li>Your domain name</li>\n  <li>Your droplet ip address (&lt;code&gt;ping your_domain.com&lt;/code&gt;)</li>\n</ul>\n<h2>To Start</h2>\n<pre><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> my-project \n<span class=\"token function\">touch</span> .travis.yml <span class=\"token comment\"># if you don't already have one</span></code></pre>\n<p>Here's a sample .travis.yml:</p>\n<pre><code class=\"language-yaml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> nodeCreate public and private SSH keysjs\n<span class=\"token key atrule\">nodejs</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> 6.9.1\n<span class=\"token key atrule\">notifications</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">email</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">onfailure</span><span class=\"token punctuation\">:</span> change\n    <span class=\"token key atrule\">onsuccess</span><span class=\"token punctuation\">:</span> change\n<span class=\"token key atrule\">addons</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">sshknownhosts</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> 123.45.56.78 <span class=\"token comment\"># your droplet IP goes here</span>\n<span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> master\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">global</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> REMOTEAPPDIR=/var/www/MYDOMAIN.COM/\n  <span class=\"token punctuation\">-</span> REMOTEUSER=deploy\n  <span class=\"token punctuation\">-</span> REMOTEHOST=123.45.56.78 <span class=\"token comment\"># your droplet IP goes here</span>\n  <span class=\"token punctuation\">-</span> PORT=8080\n<span class=\"token key atrule\">beforeinstall</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> npm install <span class=\"token punctuation\">-</span>g npm@^2\n<span class=\"token key atrule\">install</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> npm install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>only=dev\n<span class=\"token key atrule\">beforescript</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> chmod 600 deploy <span class=\"token important\">&amp;&amp;</span> mv deploy ~/.ssh/idrsa\n<span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> npm run build\n<span class=\"token key atrule\">after_success</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token string\">\"./scripts/deploy.sh\"</span></code></pre>\n<p>On your local machine, open terminal and create keys.</p>\n<pre><code class=\"language-bash\">ssh-keygen -f ~/.ssh/deploy\nssh-add -K ~/.ssh/deploy <span class=\"token comment\"># add your SSH private key and store password in keychain</span></code></pre>\n<figure><img src=\"https://s3.amazonaws.com/contentkit-dev-deploymentbucket-3hlcbqx9f9nl/static/cjeqgfqjknnq20199oe3zwi37/digitalocean.jpeg\"/></figure>\n<h2>Creating A New Ubuntu Server</h2>\n<p>Resource: new ubuntu user.</p>\n<pre><code class=\"language-bash\"><span class=\"token function\">ssh</span> user@123.45.56.78\n<span class=\"token function\">su</span> - root <span class=\"token comment\"># switch to root </span>\nadduser deploy <span class=\"token comment\"># add a new user</span>\n<span class=\"token function\">usermod</span> -aG <span class=\"token function\">sudo</span> deploy\n<span class=\"token function\">su</span> - deploy <span class=\"token comment\">## switch to newly created user 'deploy'</span>\n<span class=\"token function\">cat</span> ~/.ssh/deploy.pub <span class=\"token operator\">|</span> <span class=\"token function\">ssh</span> user@123.45.56.78 <span class=\"token string\">\"mkdir -p ~/.ssh &amp;&amp; cat >>  ~/.ssh/authorized_keys\"</span></code></pre>\n<h2>Copy local private key to project folder</h2>\n<p>Locally, we'll do the following.</p>\n<pre><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> my-project\n<span class=\"token function\">cp</span> ~/.ssh/deploy <span class=\"token operator\">></span> ./deploy <span class=\"token comment\">## copy private keys to project directory</span>\ntravis encrypt-file deploy --add\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'deploy'</span> <span class=\"token operator\">>></span> .gitignore <span class=\"token comment\">## make sure your private key is .gitignored!</span>\n<span class=\"token function\">rm</span> deploy <span class=\"token comment\">## even better</span></code></pre>\n<h3>Notes</h3>\n<ul>\n  <li>This assumes you've installed the travis-ci gem</li>\n  <li>This assumes you've enabled the project (&lt;code&gt;travis enable&lt;/code&gt;)</li>\n  <li>This assumes you've created a .travis.yml config file (otherwise --add won't work).</li>\n</ul>\n<h2>Deployment scripts</h2>\n<pre><code class=\"language-bash\"><span class=\"token function\">mkdir</span> scripts</code></pre>\n<h3>scripts/deploy.sh</h3>\n<pre><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env sh</span>\n<span class=\"token builtin class-name\">set</span> -x\n<span class=\"token function\">tar</span> -czf package.tgz build <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token function\">scp</span> package.tgz <span class=\"token variable\">$REMOTE_USER</span>@<span class=\"token variable\">$REMOTE_HOST</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$REMOTE_APP_DIR</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token function\">ssh</span> <span class=\"token variable\">$REMOTE_USER</span>@<span class=\"token variable\">$REMOTE_HOST</span> <span class=\"token string\">'bash -s'</span> <span class=\"token operator\">&lt;</span> ./scripts/untar.sh</code></pre>\n<h3>scripts/untar.sh</h3>\n<pre><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env sh</span>\n<span class=\"token builtin class-name\">set</span> -x\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NODE_ENV</span><span class=\"token operator\">=</span>production\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NVM_BIN</span><span class=\"token operator\">=</span><span class=\"token environment constant\">$HOME</span>/.nvm/versions/node/v6.9.0/bin\n<span class=\"token builtin class-name\">cd</span> /var/www/YOUR-DOMAIN.com <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token function\">tar</span> zxvf package.tgz -C <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token function\">mv</span> build/package.json <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token function\">npm</span> run start</code></pre>"}}}}