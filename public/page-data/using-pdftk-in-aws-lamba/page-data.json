{"componentChunkName":"component---src-components-post-tsx","path":"/using-pdftk-in-aws-lamba","result":{"pageContext":{"post":{"id":"cjkfzvvxt08up0191l38aadq4","title":"Using PDFtk in AWS Lamba","slug":"using-pdftk-in-aws-lamba","published_at":"2018-08-04T22:52:56.509","created_at":"2018-08-04T22:33:51","encoded_html":"PGltZyBzcmM9Imh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9jb250ZW50a2l0L3N0YXRpYy9jamtmenZ2eHQwOHVwMDE5MWwzOGFhZHE0L3BkZnRrLnBuZyIgLz4KPHA+SWYgeW91J3JlIG1hbmlwdWxhdGluZyBQREZzIHVzaW5nIEFXUyBMYW1iZGEgeW91J2xsIHByb2JhYmx5IG5lZWQgUERGdGsgYXQgc29tZSBwb2ludC48L3A+CjxwPlBERnRrIGlzIHRoZSBTd2lzcyBhcm15IGtuaWZlIG9mIFBERiBtYW5pcHVsYXRpb24uIFBERnRrIGlzIHByZWluc3RhbGxlZCBvbiBNYWMuIDwvcD4KPHA+U28gbG9jYWxseSBvbiBteSBjb21wdXRlciBJIGNhbiBnZXQgdGhlIG51bWJlciBvZiBwYWdlcyBpbiBhIFBERiB3aXRoIHRoaXMgUERGdGsgY29tbWFuZC48L3A+CjxwPkJ1dCBvYnZpb3VzbHkgdGhpcyB3b24ndCB3b3JrIGluIEFXUyBMYW1iZGEgYmVjYXVzZSBQREZ0ayBpcyBub3QgYSBwcmVpbnN0YWxsZWQgYmluYXJ5LjwvcD4KPHA+VGhlIHdvcmsgYXJvdW5kIGlzOjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPm5wbSBpIHBkZnRrPHNwYW4gY2xhc3M9InRva2VuIG9wZXJhdG9yIj4tPC9zcGFuPmxhbWJkYTwvY29kZT48L3ByZT4KPHA+QW5kIHRoZW4gcmVxdWlyZSB0aGUgcGFja2FnZSBhdCB0aGUgdG9wIG9mIHlvdXIgTGFtYmRhIGZ1bmN0aW9uOjwvcD4KPHByZT48Y29kZSBjbGFzcz0ibGFuZ3VhZ2UtanMiPjxzcGFuIGNsYXNzPSJ0b2tlbiBjb21tZW50Ij4vLyBoYW5kbGVyLmpzPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gZnVuY3Rpb24iPnJlcXVpcmU8L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4oPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBzdHJpbmciPidwZGZ0ay1sYW1iZGEnPC9zcGFuPjxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KTwvc3Bhbj4KbW9kdWxlPHNwYW4gY2xhc3M9InRva2VuIHB1bmN0dWF0aW9uIj4uPC9zcGFuPmV4cG9ydHM8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPi48L3NwYW4+PHNwYW4gY2xhc3M9InRva2VuIGZ1bmN0aW9uLXZhcmlhYmxlIGZ1bmN0aW9uIj5oYW5kbGVyPC9zcGFuPiA8c3BhbiBjbGFzcz0idG9rZW4gb3BlcmF0b3IiPj08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+KDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcGFyYW1ldGVyIj5ldmVudDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+LDwvc3Bhbj4gY29udGV4dDwvc3Bhbj48c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPik8L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBvcGVyYXRvciI+PT48L3NwYW4+IDxzcGFuIGNsYXNzPSJ0b2tlbiBwdW5jdHVhdGlvbiI+ezwvc3Bhbj4KICA8c3BhbiBjbGFzcz0idG9rZW4gY29tbWVudCI+Ly8gLi4uPC9zcGFuPgo8c3BhbiBjbGFzcz0idG9rZW4gcHVuY3R1YXRpb24iPn08L3NwYW4+CjwvY29kZT48L3ByZT4KPHA+VGhpcyBwYWNrYWdlIGluY2x1ZGVzIFBERnRrIHByZWJ1aWx0IG9uIEFtYXpvbiBMaW51eC4gWW91IG11c3QgcmVxdWlyZSBpdCBhdCB0aGUgdG9wIG9mIHlvdXIgZnVuY3Rpb24gdG8gdXBkYXRlIHByb2Nlc3MuZW52LlBLR19DT05GSUdfUEFUSCBhbmQgcHJvY2Vzcy5lbnYuTERfTElCUkFSWV9QQVRIIHRvIHBvaW50IHRvIHRoZSBiaW5hcnkgaW4gbm9kZV9tb2R1bGVzL3BkZmt0ay1sYW1iZGEvYmluLjwvcD4=","excerpt":"","image":{"id":"cjkg0kx6k0bq101916abkxoiu","url":"static/cjkfzvvxt08up0191l38aadq4/pdftk.png"},"posts_tags":[{"tag":{"id":"3pl7ejawubufz70vjnad","name":"AWS"}}],"date":"08/04/2018","html":"<img src=\"https://s3.amazonaws.com/contentkit/static/cjkfzvvxt08up0191l38aadq4/pdftk.png\" />\n<p>If you're manipulating PDFs using AWS Lambda you'll probably need PDFtk at some point.</p>\n<p>PDFtk is the Swiss army knife of PDF manipulation. PDFtk is preinstalled on Mac. </p>\n<p>So locally on my computer I can get the number of pages in a PDF with this PDFtk command.</p>\n<p>But obviously this won't work in AWS Lambda because PDFtk is not a preinstalled binary.</p>\n<p>The work around is:</p>\n<pre><code class=\"language-js\">npm i pdftk<span class=\"token operator\">-</span>lambda</code></pre>\n<p>And then require the package at the top of your Lambda function:</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// handler.js</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pdftk-lambda'</span><span class=\"token punctuation\">)</span>\nmodule<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">handler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>This package includes PDFtk prebuilt on Amazon Linux. You must require it at the top of your function to update process.env.PKG_CONFIG_PATH and process.env.LD_LIBRARY_PATH to point to the binary in node_modules/pdfktk-lambda/bin.</p>"}}}}